<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>PathoTracker huilab</title>
	<meta content='width=device-width, initial-scale=1.0, shrink-to-fit=no' name='viewport' />
	<link rel="icon" href="/statics/assets/img/pku.jpg" type="image/x-icon"/>
	
	<!-- Fonts and icons -->
	<script src="/statics/assets/js/plugin/webfont/webfont.min.js"></script>
	<script>
		WebFont.load({
			google: {"families":["Lato:300,400,700,900"]},
			custom: {"families":["Flaticon", "Font Awesome 5 Solid", "Font Awesome 5 Regular", "Font Awesome 5 Brands", "simple-line-icons"], urls: ['/statics/assets/css/fonts.min.css']},
			active: function() {
				sessionStorage.fonts = true;
			}
		});
	</script>

	<!-- CSS Files -->
	<link rel="stylesheet" href="/statics/assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="/statics/assets/css/atlantis.min.css">
</head>
<body>
	<div class="wrapper">
		<div class="main-header">
			<!-- Logo Header -->
			<div class="logo-header" data-background-color="blue">
				
				<!--  -->
				<!-- href="index.html" ->改为 href="#"  -->
				<a href="#" class="logo">
					<img src="/statics/assets/img/beidarenmin.jpg" alt="navbar brand" class="navbar-brand" width="40" height="40">
					<img src="/statics/assets/img/pku.jpg" alt="navbar brand" class="navbar-brand" width="40" height="40">
				</a>
				<button class="navbar-toggler sidenav-toggler ml-auto" type="button" data-toggle="collapse" data-target="collapse" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon">
						<i class="icon-menu"></i>
					</span>
				</button>
				<button class="topbar-toggler more"><i class="icon-options-vertical"></i></button>
				<div class="nav-toggle">
					<button class="btn btn-toggle toggle-sidebar">
						<i class="icon-menu"></i>
					</button>
				</div>
			</div>
			<!-- End Logo Header -->

			<!-- Navbar Header -->
			<nav class="navbar navbar-header navbar-expand-lg" data-background-color="blue2">
				
				<div class="container-fluid">
					<span class="text-white fw-bold col-xl-4 ml-auto mr-auto" style="font-size:20px">PathoTracker</span>
				</div>
			</nav>
			<!-- End Navbar -->
		</div>

		<!-- Sidebar -->
		<div class="sidebar sidebar-style-2">			
			<div class="sidebar-wrapper scrollbar scrollbar-inner">
				<div class="sidebar-content">
					<ul class="nav nav-primary">
						<li class="nav-section">
							<span class="sidebar-mini-icon">
								<i class="fa fa-ellipsis-h"></i>
							</span>
							<h4 class="text-section">Components</h4>
						</li>
						<li class="nav-item">
							<a href="/index/">
								<i class="fas fa-desktop"></i>
								<p>Home</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="/Tutorial/">
								<i class="fas fa-th-list"></i>
								<p>Tutorial</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="/PathoTracker/">
								<i class="fas fa-pen-square"></i>
								<p>PathoTracker</p>
							</a>
						</li>

						<li class="nav-item">
							<a href="/PathoTracker_ST11/">
								<i class="fas fa-pen-square"></i>
								<p>PathoTracker (ST11)</p>
							</a>
							
						</li>

						<li class="nav-item">
							<a href="/species/">
								<i class="fas fa-chart-bar"></i>
								<p>Species detection</p>
							</a>
						</li>

						<li class="nav-item">
							<a href="/phylogenetic_tree/">
								<i class="fas fa-tree"></i>
								<p>Phylogenetic tree</p>
							</a>
						</li>

						<li class="nav-item">
							<a href="/CRE_network/">
								<i class="fas fa-table"></i>
								<p>CRE network</p>
							</a>
						</li>
						
						<li class="nav-item">
							<a href="/About_Contact/">
								<i class="fab fa-telegram"></i>
								<p>About & Contact</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="/Disclaimer/">
								<i class="fas fa-bars"></i>
								<p>Disclaimer</p>
							</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<!-- End Sidebar -->

		
		<div class="main-panel">
			<div class="content">
				<div class="page-inner">
					<div class="page-header">
						<h4 class="page-title">PathoTracker (ST11)</h4>
						<ul class="breadcrumbs">
							<li class="nav-home">
								<a href="#">
									<i class="flaticon-home"></i>
								</a>
							</li>
							<li class="separator">
								<i class="flaticon-right-arrow"></i>
							</li>
							<li class="nav-item">
								<a href="#">Home</a>
							</li>
							<li class="separator">
								<i class="flaticon-right-arrow"></i>
							</li>
							<li class="nav-item">
								<a href="#">PathoTracker (ST11)</a>
							</li>
						</ul>
					</div>
					<div class="row">
						<div class="col">

							<div class="card">
								<div class="card-header">
									<h4 class="card-title">PathoTracker ST11 ({{filename}})</h4>
								</div>
								<div class="card-body">
									<h4 class="mt-3 b-b1 pb-2 mb-4 fw-bold">Isolate genotype</h4>
									<div class="pre-scrollable">
									<table class="table table-head-bg-primary mt-4" style="overflow-y:auto;overflow-x:auto; height:100px;" id="tab-isolate">
										<thead>
											<tr>
												<th scope="col">Isolate</th>
												<th scope="col">score all</th><th scope="col">pan genome comparison</th><th scope="col">score_identity</th><th scope="col">score_avg</th><th scope="col">pan genome count</th>
												<th scope="col">country</th><th scope="col">state</th><th scope="col">city</th><th scope="col">collection_date</th><th scope="col">cluster</th><th scope="col">species</th><th scope="col">species_match</th><th scope="col">contig_count</th><th scope="col">N50</th><th scope="col">largest_contig</th><th scope="col">ST</th><th scope="col">virulence_score</th>
												<th scope="col">resistance_score</th><th scope="col">num_resistance_classes</th><th scope="col">num_resistance_genes</th><th scope="col">Yersiniabactin</th><th scope="col">YbST</th><th scope="col">"col"ibactin</th><th scope="col">CbST</th><th scope="col">Aerobactin</th><th scope="col">AbST</th><th scope="col">Salmochelin</th><th scope="col">SmST</th><th scope="col">rmpA.y</th>
												<th scope="col">rmpA2.y</th><th scope="col">wzi</th><th scope="col">K_locus</th><th scope="col">K_locus_problems</th><th scope="col">K_locus_confidence</th><th scope="col">K_locus_identity</th><th scope="col">K_locus_missing_genes</th><th scope="col">Chr_ST</th><th scope="col">gapA</th><th scope="col">infB</th><th scope="col">mdh</th><th scope="col">pgi</th><th scope="col">phoE</th>
												<th scope="col">rpoB</th><th scope="col">tonB</th><th scope="col">ybtS</th><th scope="col">ybtX</th><th scope="col">ybtQ</th><th scope="col">ybtP</th><th scope="col">ybtA</th><th scope="col">irp2</th><th scope="col">irp1</th><th scope="col">ybtU</th><th scope="col">ybtT</th><th scope="col">ybtE</th><th scope="col">fyuA</th><th scope="col">clbA</th><th scope="col">clbB</th>
												<th scope="col">clbC</th><th scope="col">clbD</th><th scope="col">clbE</th><th scope="col">clbF</th><th scope="col">clbG</th><th scope="col">clbH</th><th scope="col">clbI</th><th scope="col">clbL</th><th scope="col">clbM</th><th scope="col">clbN</th><th scope="col">clbO</th><th scope="col">clbP</th><th scope="col">clbQ</th><th scope="col">AGly</th><th scope="col">COL</th>
												<th scope="col">Fcyn</th><th scope="col">Flq</th><th scope="col">Gly</th><th scope="col">MLS</th><th scope="col">Ntmdz</th><th scope="col">Phe</th><th scope="col">Rif</th><th scope="col">Sul</th><th scope="col">Tet</th><th scope="col">Tmt</th><th scope="col">Bla</th><th scope="col">Bla_Carb</th><th scope="col">Bla_ESBL</th><th scope="col">Bla_ESBL_inhR</th><th scope="col">Bla_broad</th>
												<th scope="col">Bla_broad_inhR</th>
												
												<th scope="col">MEM</th><th scope="col">IPM</th><th scope="col">ETP</th><th scope="col">FOX</th><th scope="col">FEP</th><th scope="col">CAZ</th><th scope="col">CAZ-AVI</th><th scope="col">CLC</th><th scope="col">CTX</th><th scope="col">CTC</th><th scope="col">CRO</th><th scope="col">CSL</th><th scope="col">TZP</th><th scope="col">AMK</th><th scope="col">CIP</th><th scope="col">LVX</th><th scope="col">MIN</th><th scope="col">COL</th><th scope="col">TGC</th><th scope="col">CHL</th><th scope="col">FOS</th><th scope="col">ATM</th><th scope="col">ATM-AVI</th>
											</tr>
										</thead>
										<tbody>
											<tr></tr>
										</tbody>
									</table>
									</div>
								</div>
							</div>
							<div class="card">
								<div class="card-header">
									<h4 class="card-title">PathoTracker ST11</h4>
								</div>
								<div class="card-body">
									<h4 class="mt-3 b-b1 pb-2 mb-4 fw-bold">Resistance genes</h4>
									<table class="table table-head-bg-primary mt-4" >
										<thead>
											<tr>
												<th scope="col" style="width:33%;text-align:center">Gene</th>
												<th scope="col" style="width:33%;text-align:center">Identity</th>
												<th scope="col" style="width:33%;text-align:center">Coverage</th>
											</tr>
										</thead>
									</table>
									<div class="pre-scrollable tableBody">
										<table class="table" style="margin-bottom: 0px;">
											<tbody style="overflow-y:scroll; height:100px;" id="tab-res">
												<tr></tr>
											</tbody>
                                    	</table>
									</div>

									<h4 class="mt-5 pb-3 mb-0 fw-bold">Virulence genes</h4>
									<table class="table table-head-bg-primary mt-4" >
										<thead>
											<tr>
												<th scope="col" style="width:33%;text-align:center">Gene</th>
												<th scope="col" style="width:33%;text-align:center">Identity</th>
												<th scope="col" style="width:33%;text-align:center">Coverage</th>
											</tr>
										</thead>
									</table>
									<div class="pre-scrollable tableBody">
										<table class="table" style="margin-bottom: 0px;">
											<tbody style="overflow-y:scroll; height:100px;" id="tab-vir">
												<tr></tr>
											</tbody>
                                    	</table>
									</div>
								</div>
							</div>
						</div>
					</div>

		</div>
	</div>

	<footer class="footer">
		<div class="container-fluid">
			<nav class="pull-left">
				<ul class="nav">
					<li class="nav-item">
						<a class="nav-link" href="https://www.pkuph.cn/">
							pkuph
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="https://www.pku.edu.cn/">
							pku
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="https://www.bjmu.edu.cn/">
							bjmu
						</a>
					</li>
					<li class="nav-item">
								<a class="nav-link" href="https://www.wanghuilab.net">
									huilab
								</a>
						</li>
					</ul>
				</nav>
			<div class="copyright ml-auto">
						Copyright 2023 Huilab, Department of Clinical Laboratory<br>Peking University People's Hospital, Beijing, China.
						<br>
						<!--<i class="fa fa-heart heart text-danger"></i>
						by <a href="https://www.wanghuilab.net"> Huilab </a>-->
			</div>				
		</div>
	</footer>
	</div>
		
	</div>
	
	<!--   Core JS Files   -->
	<script src="/statics/assets/js/core/jquery.3.2.1.min.js"></script>
	<script src="/statics/assets/js/core/popper.min.js"></script>
	<script src="/statics/assets/js/core/bootstrap.min.js"></script>
	<!-- jQuery UI -->
	<script src="/statics/assets/js/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
	<script src="/statics/assets/js/plugin/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js"></script>
	
	<!-- jQuery Scrollbar -->
	<script src="/statics/assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js"></script>
	<!-- Atlantis JS -->
	<script src="/statics/assets/js/atlantis.min.js"></script>

	<script type="text/javascript">
	
		//function GetRequest() {
		//	var url = location.search; //获取url中"?"符后的字串
		//	var theRequest = new Object();
		//		if (url.indexOf("?") != -1) {
		//		var str = url.substr(1);
		//		strs = str.split("&");
		//		for(var i = 0; i < strs.length; i ++) {
		//		theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
		//		}
		//	}
		//	return theRequest;
		//}
		//function fill() {
		//	var filename = GetRequest();
		//	console.log(filename)
		//}
		
		
		//var form = new FormData();
		//form.append('filename', filename);
		//console.log(filename)
	
		//xhr.open('POST','/result/',true);
		//xhr.setRequestHeader('X-CSRFTOKEN','{{ request.COOKIES.csrftoken }}');   //Django CSRF
		//xhr.send(form); 
		
		//var filename = "{{filename}}"
		
		
		var filename = "{{filename}}"
		
		console.log("return reponse")
		var species = "{{species}}"
		
		//console.log(species)
		
		var arr=species.split("	");
		//console.log(arr);
		for (var i = 0; i < arr.length-1; i++) {
			var str = "<tr><td>";
			for (var j = 0; j < 7; j++){
				if (j == 0)
				{
					str = str + arr[i]
					i++;
					continue
				}
				str = str + "</td><td>" + arr[i]
				i++;
			}
			str = str + "</td></tr>";
			//console.log(str);
			$("#tab-species").append(str);
			i--;
		}

		var data = "{{html_data}}"
		var arr=data.split("	");
		//console.log(arr);
		for (var i = 0; i < arr.length-1; i++) {
			var str = "<tr><td>";
			for (var j = 0; j < 112; j++){
				if (j == 0)
				{
					str = str + arr[i]
					i++;
					continue
				}
				str = str + "</td><td>" + arr[i]
				i++;
			}
			str = str + "</td></tr>";
			//console.log(str);
			$("#tab-isolate").append(str);
			i--;
		}
		var data_res = "{{message_res}}"
		var arr=data_res.split(" ");
		var count_res = "{{count_res}}"
		count_res = Number(count_res)
		//console.log(count_res);
		for (var i = 0; i < count_res*4; i++) {
			var str = "<tr><td style=\"width:33%;\" align=\"center\">";
			for (var j = 0; j < 3; j++){
				if (j == 0)
				{
					str = str + arr[i]
					i++;
					continue
				}
				str = str + "</td><td  style=\"width:33%;\" align=\"center\">" + arr[i]
				i++;
			}

			str = str + "</td></tr>";
			//console.log(str);
			$("#tab-res").append(str);
		}

		var data_vir = "{{message_vir}}"
		var arr=data_vir.split(" ");
		var count_vir = "{{count_vir}}"
		count_vir = Number(count_vir)
		//console.log(count_vir);
		for (var i = 0; i < count_vir*4; i++) {
			var str = "<tr><td style=\"width:33%;\" align=\"center\">";
			for (var j = 0; j < 3; j++){
				if (j == 0)
				{
					str = str + arr[i]
					i++;
					continue
				}
				str = str + "</td><td  style=\"width:33%;\" align=\"center\">" + arr[i]
				i++;
			}

			str = str + "</td></tr>";
			//console.log(str);
			$("#tab-vir").append(str);
		}
	</script>

</body>
</html>